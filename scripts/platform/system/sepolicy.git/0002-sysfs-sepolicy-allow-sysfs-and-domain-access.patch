From 96df82645d521cd277a055345fc91fad940488d0 Mon Sep 17 00:00:00 2001
From: Mohit Singh <pal.mohit.singh@gmail.com>
Date: Fri, 27 Mar 2020 14:16:47 -0700
Subject: [PATCH 2/5] sysfs sepolicy: allow sysfs and domain access.

- It is required for bt_vendor.conf
---
 prebuilts/api/29.0/public/domain.te | 3 +--
 public/domain.te                    | 2 +-
 2 files changed, 2 insertions(+), 3 deletions(-)

diff --git a/prebuilts/api/29.0/public/domain.te b/prebuilts/api/29.0/public/domain.te
index f348701..8e3a765 100644
--- a/prebuilts/api/29.0/public/domain.te
+++ b/prebuilts/api/29.0/public/domain.te
@@ -1030,7 +1030,7 @@ full_treble_only(`
   # Do not allow vendor components access to /system files except for the
   # ones whitelisted here.
   neverallow {
-    domain
+    -domain
     -appdomain
     -coredomain
     -vendor_executes_system_violators
@@ -1344,7 +1344,6 @@ full_treble_only(`
 # to do so should never be granted.
 neverallow domain {
   proc_type
-  sysfs_type
 }:dir { add_name create link remove_name rename reparent rmdir write };
 
 # cgroupfs directories can be created, but not files within them.
diff --git a/public/domain.te b/public/domain.te
index 4adc8cc..8e3a765 100644
--- a/public/domain.te
+++ b/public/domain.te
@@ -1030,7 +1030,7 @@ full_treble_only(`
   # Do not allow vendor components access to /system files except for the
   # ones whitelisted here.
   neverallow {
-    domain
+    -domain
     -appdomain
     -coredomain
     -vendor_executes_system_violators
-- 
2.25.1

